<!DOCTYPE html>
<html>
  <head>
    <title>Advanced Functions</title>
 
  </head>
  <body>
    <button class="js-start-finish">start</button>

    <button class="js-status-button">start</button>
    
    <br><br>

    <button class="js-add-cart">Add Cart</button>

    <p class="js-message"></p>

    <br><br>

    <button class="js-add-message-button">Add</button>
    <button class="js-remove-message-button">Remove</button>

    
    <script>

      // Exercise 12a
      const add = function(a, b) {
        console.log(a + b);
      }

      add(2,3);

      // Exercise 12b
      function runTwice(funParam) {
        let i = 1;
        while (i < 3) {
          i++;
          funParam();
        }
      }

      runTwice(function() {
        console.log('12b');
      });

      // Exercise 12c, 12p e 12q
      const startFinishButtonElement = document.querySelector('.js-start-finish');
      startFinishButtonElement.addEventListener('click', () => {
        modifyButton();
      });


      function modifyButton() {
        setTimeout(() => {
          if (startFinishButtonElement.innerHTML === 'start') {
            startFinishButtonElement.innerHTML = 'Finished';
          }else{
            startFinishButtonElement.innerHTML = 'start';
          };
        }, 1000);
      };

      // Exercise 12d, 12p e 12q
      const statusButtonElement = document.querySelector('.js-status-button');
      statusButtonElement.addEventListener('click', () => {
        modifyStatusButton();
      });

      function modifyStatusButton() {
        statusButtonElement.innerHTML = 'Loading...';
        setTimeout(() => {
          statusButtonElement.innerHTML = 'Finished';
        }, 3000);
      };

      // Exercises 12e e 12f e 12q
      const addButtonElement = document.querySelector('.js-add-cart');
      addButtonElement.addEventListener('click', () => {
        addCart();
      });

      function addCart() {
        let changeMessage;
        clearTimeout(changeMessage);
        const paragMessage = document.querySelector('.js-message');
        paragMessage.innerHTML = 'Added';
        changeMessage = setTimeout(function() {
          paragMessage.innerHTML = '';
         }, 2000);
      };

      // Exercise 12g
      /*
      setInterval(() => {
        if (document.title === 'Advanced Functions') {
          document.title = '(2) new messages.'; 
        } else {
          document.title = 'Advanced Functions';
        }
      }, 1000);
      */
     
      // Exercise 12h e 12i
      let numMessage = 2;
      setInterval(function() {
        if (numMessage === 0) {
          document.title = 'Advanced Function';
        } else if (document.title === 'Advanced Functions') {
          document.title = `(${numMessage}) new messages.`;
        } else { 
          document.title = 'Advanced Functions';
        }
      }, 1000);

      const addMessageButton = document.querySelector('.js-add-message-button');
      addMessageButton.addEventListener('click', () => {
        addMessage();
      });

      const removeMessageButton = document.querySelector('.js-remove-message-button');
      removeMessageButton.addEventListener('click', () => {
        removeMessage();
      });


      function addMessage() {
        numMessage++;
      }

      function removeMessage() {
        numMessage--;
      }
  
      // Exercise 12j e 12k
      const multiply = (num1, num2) => num1 * num2;

      console.log(multiply(3, 2));

      // Exercise 12l
      const array1 = [
        1, -2, 3, 5, -9, -5, 0, 7, 10, -23
      ];

      // Solução 1
      let count = 0;
      function countPos(param) {
        let count = 0;
        param.forEach((value) => {
          if (value >= 0) {
            count++;
          }
        });
        return count;
      };
      console.log(countPos(array1));

      // Solução 2
      const countPositive = param => {
        let count = 0;
        param.forEach((value) => {
          if (value >= 0) {
            count++;
          }
        });
        return count;
      };
      console.log(countPositive(array1));
  
      // Exercise 12m

      //Solução 1
     const addNum = (param1, param2) => {
      return param1.map((value) => value = value + param2)
     };
     console.log(addNum(array1, 3));

     // Solução 2
      function addNumber(param1, param2) {
        return param1.map((value) => value + param2);
      };
      console.log(addNumber(array1, 5));

      // Exercise 12n

      // Solução 1
      function removeEggs(param) {
        return param.filter((value) => value !== 'egg');
      };
      console.log(removeEggs(['water', 'broccoli', 'apple', 'egg', 'letuce', 'egg', 'rice', 'egg', 'bean']));

      // Solução 2
      function removeEggs2(param) {
        const result = param.filter((value) => {
          if (value === 'egg') {
            return false;
          } else {
            return true;
          };
        });
          return result;
      };
      console.log(removeEggs2(['water', 'broccoli', 'apple', 'egg', 'letuce', 'egg', 'rice', 'egg', 'bean']));

      // Exercise 12o
      function removeEggs3(param) {
        let count = 0;
        const result = param.filter((value) => {
        if (value === 'egg' && count < 2) {
          count++; 
          return false;
          } else {
            return true;
          };
        });
          return result;
      };

      console.log(removeEggs3(['water', 'broccoli', 'apple', 'egg', 'letuce', 'egg', 'rice', 'egg', 'bean']));


      const var1 = [20, 30, 'teste', -5, 'array'];
      console.log(var1[2]);



      /*

      function greeting() {
        console.log('hello');
      }

      greeting();

      // Atribuição de uma função a uma variável
      const functionGreeting = function greeting() {
        console.log('hello');
      };

      console.log(typeof functionGreeting);
      console.log(functionGreeting);
      // Para executar a função basta chamar a variável
      functionGreeting();

      // Outra forma de escrever a função e armazená-la em uma váriavel é omitindo o nome da função.
      const functionGreeting2 = function() {
        console.log('hello2');
      };

      functionGreeting2();

      // É possível armazenar uma função em um objeto. Neste caso, a função passa a ser chamada de Método
      const objeto1 = {
        num: 3,
        fun: function() {
          console.log('Hello3');
        }
      }
      // Como executar um método
      objeto1.fun();

      // Funções podem receber parâmetros
      function display(param) {
        console.log(param + 2);
      }

      display(2);

      // Funções podem receber uma função como parâmetro. A função passada é chamada de Callback Function
      function run(param) {
        param();
      }
      run(function(){
        console.log('Hello4');
      });

      // Você pode executar uma função no futuro, com o comando setTimeout(). Ele seta um timer para a execução. Dois parâmetros: o 1º é a função e o 2º é o tempo em milisegundos.
      setTimeout(function(){
        console.log('Vai aparecer em 3 segundos');
      }, 3000);

      // O seu uso pode provocar a criação do Assyncronous Code, quando uma linha depois do timer é executada antes. Veja o exemplo.
      console.log('Vou executar antes!');

      // SetInterval() é outro comando assíncrono. Ele executa a mesma função a cada tempo definido no segundo parâmetro.
      /*
      setInterval(function(){
        console.log('Vou aparecer a cada 3 segundos');
      }, 3000);
    

      // Um outro método para varrer um array ".forEach"
      [
        'make dinner',
        'wash dishes',
        'watch youtube'
      ].forEach(function(value, index) {
        if (value === 'wash dishes') {
          return; 
          // usado para sair da função e skip um determinado value
        }
        console.log(value);
        console.log(index);
      });
*/
    </script>
  </body>
</html>
